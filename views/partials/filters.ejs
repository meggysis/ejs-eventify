<!-- views/partials/filters.ejs -->

<% 
    // Initialize variables with default values to prevent ReferenceError
    selectedCategories = typeof selectedCategories !== 'undefined' ? selectedCategories : [];
    selectedColors = typeof selectedColors !== 'undefined' ? selectedColors : [];
    selectedPrice = typeof selectedPrice !== 'undefined' ? selectedPrice : 'all';
    customPrice = typeof customPrice !== 'undefined' ? customPrice : { minPrice: '', maxPrice: '' };
%>

<!-- Sidebar Filter Section -->
<div class="filters-content">
    <!-- Categories Section -->
    <h3>
        Categories 
        <button type="button" aria-expanded="<%= selectedCategories.length > 0 ? 'true' : 'false' %>" aria-controls="categories-section" class="toggle-btn">
            <%= selectedCategories.length > 0 ? '-' : '+' %>
        </button>
    </h3>
    <div id="categories-section" class="category-wrapper <%= selectedCategories.length > 0 ? '' : 'hidden-filter' %>">
        <!-- Categories Checkboxes -->
        <div class="category-group">
            <h4>General Categories</h4>
            <label>
                <input type="checkbox" name="categories[]" value="wedding" <%= selectedCategories.includes('wedding') ? 'checked' : '' %>> Wedding
            </label>
            <label>
                <input type="checkbox" name="categories[]" value="birthday" <%= selectedCategories.includes('birthday') ? 'checked' : '' %>> Birthday
            </label>
            <label>
                <input type="checkbox" name="categories[]" value="halloween" <%= selectedCategories.includes('halloween') ? 'checked' : '' %>> Halloween
            </label>
            <label>
                <input type="checkbox" name="categories[]" value="academic" <%= selectedCategories.includes('academic') ? 'checked' : '' %>> Academic
            </label>
            <label>
                <input type="checkbox" name="categories[]" value="corporate" <%= selectedCategories.includes('corporate') ? 'checked' : '' %>> Corporate
            </label>
            <label>
                <input type="checkbox" name="categories[]" value="cultural" <%= selectedCategories.includes('cultural') ? 'checked' : '' %>> Cultural
            </label>
            <label>
                <input type="checkbox" name="categories[]" value="entertainment" <%= selectedCategories.includes('entertainment') ? 'checked' : '' %>> Entertainment
            </label>
            <label>
                <input type="checkbox" name="categories[]" value="holiday" <%= selectedCategories.includes('holiday') ? 'checked' : '' %>> Holiday
            </label>
            <label>
                <input type="checkbox" name="categories[]" value="luxury" <%= selectedCategories.includes('luxury') ? 'checked' : '' %>> Luxury
            </label>
            <label>
                <input type="checkbox" name="categories[]" value="seasonal" <%= selectedCategories.includes('seasonal') ? 'checked' : '' %>> Seasonal
            </label>
        </div>
    </div>

    <!-- Colors Section -->
    <h3>
        Color 
        <button type="button" aria-expanded="<%= selectedColors.length > 0 ? 'true' : 'false' %>" aria-controls="colors-section" class="toggle-btn">
            <%= selectedColors.length > 0 ? '-' : '+' %>
        </button>
    </h3>
    <div id="colors-section" class="color-group <%= selectedColors.length > 0 ? '' : 'hidden-filter' %>">
        <!-- Colors Checkboxes -->
        <label>
            <input type="checkbox" name="colors[]" value="black" <%= selectedColors.includes('black') ? 'checked' : '' %>>
            <div class="color-circle color-black"></div>
            Black
        </label>
        <label>
            <input type="checkbox" name="colors[]" value="white" <%= selectedColors.includes('white') ? 'checked' : '' %>>
            <div class="color-circle color-white"></div>
            White
        </label>
        <label>
            <input type="checkbox" name="colors[]" value="red" <%= selectedColors.includes('red') ? 'checked' : '' %>>
            <div class="color-circle color-red"></div>
            Red
        </label>
        <label>
            <input type="checkbox" name="colors[]" value="orange" <%= selectedColors.includes('orange') ? 'checked' : '' %>>
            <div class="color-circle color-orange"></div>
            Orange
        </label>
        <label>
            <input type="checkbox" name="colors[]" value="yellow" <%= selectedColors.includes('yellow') ? 'checked' : '' %>>
            <div class="color-circle color-yellow"></div>
            Yellow
        </label>
        <label>
            <input type="checkbox" name="colors[]" value="green" <%= selectedColors.includes('green') ? 'checked' : '' %>>
            <div class="color-circle color-green"></div>
            Green
        </label>
        <label>
            <input type="checkbox" name="colors[]" value="blue" <%= selectedColors.includes('blue') ? 'checked' : '' %>>
            <div class="color-circle color-blue"></div>
            Blue
        </label>
        <label>
            <input type="checkbox" name="colors[]" value="purple" <%= selectedColors.includes('purple') ? 'checked' : '' %>>
            <div class="color-circle color-purple"></div>
            Purple
        </label>
        <label>
            <input type="checkbox" name="colors[]" value="pink" <%= selectedColors.includes('pink') ? 'checked' : '' %>>
            <div class="color-circle color-pink"></div>
            Pink
        </label>
        <label>
            <input type="checkbox" name="colors[]" value="gray" <%= selectedColors.includes('gray') ? 'checked' : '' %>>
            <div class="color-circle color-gray"></div>
            Gray
        </label>
        <label>
            <input type="checkbox" name="colors[]" value="brown" <%= selectedColors.includes('brown') ? 'checked' : '' %>>
            <div class="color-circle color-brown"></div>
            Brown
        </label>
        <label>
            <input type="checkbox" name="colors[]" value="lightgray" <%= selectedColors.includes('lightgray') ? 'checked' : '' %>>
            <div class="color-circle color-lightgray"></div>
            Light Gray
        </label>
    </div>

    <!-- Price Section -->
    <h3>
        Price 
        <button type="button" aria-expanded="<%= selectedPrice !== 'all' || customPrice.minPrice || customPrice.maxPrice ? 'true' : 'false' %>" aria-controls="price-section" class="toggle-btn">
            <%= (selectedPrice !== 'all' || customPrice.minPrice || customPrice.maxPrice) ? '-' : '+' %>
        </button>
    </h3>
    <div id="price-section" class="price-wrapper <%= (selectedPrice !== 'all' || customPrice.minPrice || customPrice.maxPrice) ? '' : 'hidden-filter' %>">
        <!-- Price Radio Buttons -->
        <label>
            <input type="radio" name="price" value="all" <%= selectedPrice === 'all' ? 'checked' : '' %>> All Prices
        </label>
        <label>
            <input type="radio" name="price" value="under25" <%= selectedPrice === 'under25' ? 'checked' : '' %>> Under $25
        </label>
        <label>
            <input type="radio" name="price" value="25-50" <%= selectedPrice === '25-50' ? 'checked' : '' %>> $25 - $50
        </label>
        <label>
            <input type="radio" name="price" value="50-75" <%= selectedPrice === '50-75' ? 'checked' : '' %>> $50 - $75
        </label>
        <label>
            <input type="radio" name="price" value="100+" <%= selectedPrice === '100+' ? 'checked' : '' %>> $100+
        </label>

        <!-- Custom Price Range -->
        <div class="custom-price">
            <h4>Custom</h4>
            <div class="price-inputs">
                <input type="number" name="minPrice" placeholder="Min Price" min="0" value="<%= customPrice.minPrice || '' %>">
                <span>TO</span>
                <input type="number" name="maxPrice" placeholder="Max Price" min="0" value="<%= customPrice.maxPrice || '' %>">
            </div>
        </div>
    </div>
</div>
